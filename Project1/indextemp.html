<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <style>
      #fanColor {
        position: fixed;
        top: 20px;
        right: 20px;
        display: none;
      }
    </style>
  </head>
  <body>
    <input type="color" id="fanColor" />

    <a-scene>
      <!-- Camera with cursor -->
      <a-entity camera look-controls position="0 1.6 0">
        <a-entity 
          cursor="fuse: false; rayOrigin: mouse" 
          raycaster="objects: .clickable"
          position="0 0 -1" 
          geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.02" 
          material="color: black; shader: flat">
        </a-entity>
      </a-entity>

      <!-- Fan Model (now with class clickable) -->
      <a-box 
        id="fanModel" 
        class="clickable"
        position="0 1 -3" 
        color="gray" 
        depth="1" 
        height="0.2" 
        width="1">
      </a-box>
    </a-scene>

    <script>
      const fan = document.querySelector('#fanModel');
      const colorInput = document.querySelector('#fanColor');

      fan.addEventListener('click', () => {
        colorInput.style.display = 'block';
        colorInput.click();
      });

      colorInput.addEventListener('input', (e) => {
        const color = e.target.value;
        fan.setAttribute('material', 'color', color);
      });
    </script>
  </body>
</html>
